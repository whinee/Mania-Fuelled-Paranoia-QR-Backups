\documentclass[a4paper,oneside,english]{book}
\usepackage[margin=0.5in]{geometry}
\usepackage{graphicx} % Required for inserting images
\usepackage{array}
\usepackage{hyperref} % Makes links clickable
\usepackage{fontspec}
\usepackage{microtype}
\usepackage{ragged2e}
\usepackage{etoolbox}
\usepackage{indentfirst}
\usepackage{parskip}
\usepackage{makeidx}
\usepackage[compact]{titlesec}
\usepackage{listings}
\usepackage[table]{xcolor}
\usepackage{multirow}
\usepackage{float}
\usepackage{enumitem}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{calc}
\usepackage{xstring}
\usepackage{geometry}
\usepackage{cellspace}
\usepackage{tablefootnote}
\usepackage{nameref}
\usepackage[%
  backend=bibtex      % biber or bibtex
%,style=authoryear    % Alphabeticalsch
 ,style=numeric-comp  % numerical-compressed
 ,sorting=none        % no sorting
 ,sortcites=true      % some other example options ...
 ,block=none
 ,indexing=false
 ,citereset=none
 ,isbn=true
 ,url=true
 ,doi=true            % prints doi
 ,natbib=true         % if you need natbib functions
 ,dateabbrev=false
 ,alldates=long
]{biblatex}
\usepackage{multicol}
\usepackage{amsmath}
\usepackage{amssymb}

\makeindex

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{4}

\title{Mania-Fuelled Paranoia: How to Survive the Apocalypse by Printing Your Sh*t in QR Codes v0.1.0}
\author{a.k.a Lyra Phasma}
\date{June 5, 2025}

\newcommand{\wiki}[2][]{%
  \IfStrEq{#1}{}{
    \href{https://en.wikipedia.org/wiki/#2}{#2}%
  }{
    \href{https://en.wikipedia.org/wiki/#2}{#1}%
  }%
}

\newcommand{\wikitablefootnote}[3]{%
  \wiki[{\detokenize{#1}}]{#2}\tablefootnote{\wiki[{\detokenize{#3}}]{#2}\label{#3}}%
}

\setmainfont[
  Path=fonts/,
  UprightFont = *-Regular,
  BoldFont    = *-Bold,
  ItalicFont  = *-RegularItalic,
  BoldItalicFont = *-BoldItalic,
]{Manrope}
\newfontfamily\ManropeBold[Path=fonts/]{Manrope-Bold.ttf}
\newfontfamily\ManropeExtraBold[Path=fonts/]{Manrope-ExtraBold.ttf}
\newfontfamily\ComicMono[Path=fonts/,Scale=0.9]{ComicMono.ttf}
% \setmonofont[Path=fonts/,Scale=0.9]{ComicMono.ttf}
\setmonofont[Path=fonts/]{CommitMono-700-Regular.otf}

\let\oldfootnotesize\footnotesize
\renewcommand{\footnotesize}{\normalsize}

\hyphenpenalty=9999
\exhyphenpenalty=10000
\sloppy
\setlength{\emergencystretch}{4em}
\setlength{\parskip}{1em}
\setlength{\parindent}{1em}
\setlength{\cellspacetoplimit}{3pt}
\setlength{\cellspacebottomlimit}{0pt}
\renewcommand{\arraystretch}{1.2}
\AtBeginEnvironment{tabular}{\fontsize{10}{12}\selectfont}
\titleformat{\chapter}[display]{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{-0.5em}{\Huge}
\titlespacing*{\chapter}
  {0pt}    % left margin
  {-5em}    % space before
  {-0.5em}    % space after
\setlist[enumerate,1]{left=0em, itemsep=-10pt, topsep=0pt}
\setlist[enumerate]{left=0em, itemsep=-10pt, topsep=-10pt}
\setlist[itemize]{left=0em, itemsep=-10pt, topsep=-10pt, parsep=-10pt}

\newcommand{\HUGETITLE}{\fontsize{4em}{5em}\selectfont\ManropeExtraBold}
\newcommand{\HUGE}{\fontsize{3em}{4em}\selectfont\ManropeExtraBold}

\patchcmd{\section}{\@afterindentfalse}{\@afterindenttrue}{}{}
\patchcmd{\subsection}{\@afterindentfalse}{\@afterindenttrue}{}{}
\patchcmd{\subsubsection}{\@afterindentfalse}{\@afterindenttrue}{}{}

\renewcommand{\contentsname}{Table of Contents}

\definecolor{papercolor-light-bg}{HTML}{ffffff}
\definecolor{papercolor-light-fg}{HTML}{282A36}
\definecolor{papercolor-light-purple}{HTML}{8700af}
\definecolor{papercolor-light-cyan}{HTML}{0087af}
\definecolor{papercolor-light-green}{HTML}{008700}
\definecolor{papercolor-light-orange}{HTML}{d75f00}
\definecolor{papercolor-light-pink}{HTML}{d70087}
\definecolor{papercolor-light-red}{HTML}{af0000}
\definecolor{papercolor-light-comment}{HTML}{444444}

\lstdefinestyle{papercolor-light}{
    backgroundcolor=\color{papercolor-light-bg},
    basicstyle=\ttfamily\small\color{papercolor-light-fg},
    keywordstyle=\color{papercolor-light-pink}\bfseries,
    commentstyle=\color{papercolor-light-comment}\itshape,
    stringstyle=\color{papercolor-light-green},
    numberstyle=\tiny\color{papercolor-light-purple},
    identifierstyle=\color{papercolor-light-fg},
    showstringspaces=false,
    numbers=left,
    numbersep=10pt,
    frame=single,
    rulecolor=\color{papercolor-light-purple},
    breaklines=true,
    tabsize=4,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false
}

\addbibresource{refs.bib}

\DefineBibliographyStrings{english}{
  urlseen = {Retrieved},
}

\begin{document}
\DeclareDatamodelFields[type=field,datatype=date]{eventdate}
\DeclareDatamodelFields[type=field,datatype=date]{urldate}

\frontmatter

\begin{titlepage}
  \centering
  \vspace*{\fill}

  {\HUGETITLE\bfseries Mania-Fuelled Paranoia: \par}
  \vspace{0.25em}
  {\HUGE How to Survive the Apocalypse by Printing Your Sh*t in QR Codes \par}
  \vspace{1.5em}
  {\Huge Version 0.1.0\par}
  \vspace{2em}
  {\Huge aka. Lyra Phasma\par}
  \vspace{1em}
  {\Huge June 5, 2025\par}

  \vspace*{\fill}
\end{titlepage}

\tableofcontents

\mainmatter

\chapter{Front Matter}

\section{Document}

The document has been purposely made to be grayscale due to the following reasons:

\begin{enumerate}
  \item Universality \& Accessibility
    \begin{enumerate}[label=\alph*.]
      \item To avoid issues for people with color blindness or visual impairments
    \end{enumerate}
  \item Legacy and Print-Friendliness
    \begin{enumerate}[label=\alph*.]
      \item This document is meant to be mass-printed
      \item Sparse colors in the document would mean that this document would be needed to be printed in a color printer, which often times mean more expensive
      \item Grayscale allows for photocopying while keeping clarity for the copies
    \end{enumerate}
  \item Neutrality
    \begin{enumerate}[label=\alph*.]
      \item Colors might be perceived as implying meaning or priority
    \end{enumerate}
\end{enumerate}

The author is trying her best to write this in Simplified Technical English, and has obviously failed.

\section{Notes for Future Me}

The citation from the materials have not been paraphrased as I thought that this will be only used for casual purposes. But if it does need to be used for academic purposes as well, then the paragraphs copied from the references should be paraphrased, in order to meet academic standards.

I'm sorry for being manic this September 25, 2025. I hope that you are better now. Really, I do.

\section{License}

Mania-Fuelled Paranoia: How to Survive the Apocalypse by Printing Your Sh*t in QR Codes Â© 2025 by aka. Lyra Phasma is licensed under Creative Commons Attribution-ShareAlike 4.0 International. To view a copy of this license, visit https://creativecommons.org/licenses/by-sa/4.0/

% \setcounter{chapter}{0}
% \renewcommand{\thechapter}{\arabic{chapter}}
% \chapter{Front Matter}

\chapter{Mathematics}

\input{archive/math/main.tex}

\chapter{QR Codes}

\input{archive/qr/main.tex}

\begin{lstlisting}[style=papercolor-light, language=Python, caption=Slay the print loop]
#!/usr/bin/env python3
class QRCode:
    """
    A QR Code symbol, which is a type of two-dimension barcode.

    Invented by Denso Wave and described in the ISO/IEC 18004 standard. Instances of this class represent an immutable square grid of dark and light cells. The class provides static factory functions to create a QR Code from text or binary data. The class covers the QR Code Model 2 specification, supporting all versions (sizes) from 1 to 40, all 4 error correction levels, and 4 character encoding modes.

    """
\end{lstlisting}

\chapter{Attributions}

The fonts used in this project are the following:

Sharanda M. (2018). \textit{Manrope} [Font]. Licensed under the SIL Open Font License, Version 1.1. Retrieved June 5, 2025, from https://fonts.google.com/specimen/Manrope.

Miwa, S. (2018). \textit{Comic Mono} [Font]. Licensed under the MIT License. Retrieved June 5, 2025, from https://github.com/dtinth/comic-mono-font. Modified by dtinth (2019).

The color themes used to color the code in this document are the following:

Nguyen, N. (2015-2020). \textit{PaperColor} [Theme]. Licensed under the MIT License. Retrieved June 10, 2025, from https://github.com/NLKNguyen/papercolor-theme

\printbibliography[heading=bibnumbered]

\appendix
% \chapter{The Document Itself}

% Below is the source of the whole document itself, except for the fonts and images used in this document:

% \lstinputlisting[style=papercolor-light, language={[LaTeX]TeX}]{main.tex}

\end{document}